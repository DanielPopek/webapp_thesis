
<button  (click)="saveConversation()">Save conversation</button>
<svg width="100%" height="200px"></svg>

<mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl" class="example-tree" #treeSelector>

	<mat-nested-tree-node *matTreeNodeDef="let node">
		<li>
			<div class="mat-tree-node">
          <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.name">
              <mat-icon class="mat-icon-rtl-mirror" *ngIf="node.children.length>0">
                {{nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
              </mat-icon>
            </button>  	
            <b>{{node.id}}</b>
            <input type="text" [(ngModel)]="node.name" name="node"   (keyup)="test()"/> 
            <!-- TRAINING SAMPLES -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                  Training samples:
                  </mat-panel-title>
                  <!-- <mat-panel-description>
                  </mat-panel-description> -->
                </mat-expansion-panel-header>
                
                <div>
                    <input #newSample
                    (keyup.enter)="addSample(node,newSample.value)"
                    >
                  <button (click)="addSample(node,newSample.value)">Add</button>
                  <mat-list>
                      <mat-list-item *ngFor="let sample of node.trainingSamples"> {{sample}}
                          <button (click)="removeSample(node,sample)">x</button>
                      </mat-list-item>
                  </mat-list>
                </div>            
            </mat-expansion-panel> 
            <!-- ANSWERS -->
            <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
              Answers:
              </mat-panel-title>
              <!-- <mat-panel-description>
                  
              </mat-panel-description> -->
            </mat-expansion-panel-header>
            
            <div>
                <input #newAnswer
                (keyup.enter)="addAnswer(node,newAnswer.value)"
                >
              <button (click)="addAnswer(node,newAnswer.value)">Add</button>
                <mat-list>
                  <mat-list-item *ngFor="let answer of node.answers"> {{answer}}
                      <button (click)="removeAnswer(node,answer)">x</button>
                  </mat-list-item>
                </mat-list>
                </div>          
          </mat-expansion-panel>
            <!-- EVENTS -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                  Events:
                  </mat-panel-title>
                  <!-- <mat-panel-description>
                      
                  </mat-panel-description> -->
                </mat-expansion-panel-header>
                
                <div>
                    <input #newEvent
                    (keyup.enter)="addEvent(node,newEvent.value)"
                    >
                  <button (click)="addEvent(node,newEvent.value)">Add</button>
                    <mat-list>
                      <mat-list-item *ngFor="let event of node.events"> {{event}}
                          <button (click)="removeEvent(node,event)">x</button>
                      </mat-list-item>
                    </mat-list>
                    </div>          
              </mat-expansion-panel>
      

          <button  mat-icon-button (click)="addNewItem(node)"><mat-icon>add</mat-icon></button>
          <button *ngIf="node.children.length ==0 && node.level!=0 " mat-icon-button (click)="remove(node)"><mat-icon>close</mat-icon></button>
		 

       
			</div>
			<ul [class.example-tree-invisible]="!nestedTreeControl.isExpanded(node)">
				<ng-container matTreeNodeOutlet></ng-container>
			</ul>
		</li>
	</mat-nested-tree-node>
</mat-tree>



<!-- <button (click)="checkit()">TEST</button> -->

<!-- <hr/>
<h2>Final Location Layout</h2>
<button mat-icon-button (click)="getTree()">Get Tree</button>
<br/>
<button mat-icon-button (click)="check()">Find parent</button> -->